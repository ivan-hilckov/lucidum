# Debug Server для отладки промптов

Debug сервер предоставляет веб-интерфейс для тестирования и отладки промптов генерации сопроводительных писем без запуска основного Telegram бота.

## Запуск

### Быстрый запуск

```bash
make debug
```

### Ручной запуск

```bash
uv run python debug_server.py
```

### Установка зависимостей (если требуется)

```bash
uv sync --group dev
```

## Доступ к интерфейсу

После запуска сервер будет доступен по адресу: **http://localhost:8001**

## Возможности

### 1. Генерация сопроводительных писем

- **Вкладка "Generate"** - основной интерфейс для тестирования
- Поля для ввода:
  - **Resume** - текст резюме
  - **Job Description** - описание вакансии
  - **Company Name** (опционально) - название компании
  - **Special Requirements** (опционально) - дополнительные инструкции
- **Load Example Data** - загружает тестовые данные для быстрого старта
- **Use fallback** - принудительное использование fallback метода генерации

### 2. Редактирование промптов

- **Вкладка "Edit Prompts"** - интерфейс для просмотра и редактирования промптов
- **Load Current Prompts** - загружает текущие промпты из кода
- **Test with Custom Prompts** - тестирует генерацию с измененными промптами

## Результаты

Для каждой генерации показываются:

- Сгенерированное сопроводительное письмо
- Метрики качества:
  - Quality Score (оценка качества)
  - Keywords Found (найденные ключевые слова)
  - Generation Time (время генерации)
  - Word Count (количество слов)

## Технические детали

### Архитектура

- **FastAPI** - веб-фреймворк для API
- **HTML/CSS/JavaScript** - веб-интерфейс
- **CoverLetterGenerator** - переиспользование существующей логики

### Порт и хост

- Хост: `127.0.0.1` (только локальный доступ)
- Порт: `8001` (не конфликтует с другими сервисами)

### Безопасность

- Сервер работает только локально
- Использует тот же OpenAI API ключ из `.env` файла
- Не влияет на работу основного бота

## Требования

1. **OpenAI API ключ** - должен быть установлен в `.env` файле:

   ```
   OPENAI_API_KEY=your_api_key_here
   ```

2. **Зависимости** - автоматически устанавливаются при `uv sync --group dev`

## Остановка сервера

Для остановки нажмите `Ctrl+C` в терминале где запущен сервер.

## Примечания

- Debug сервер независим от основного Telegram бота
- Изменения в промптах через веб-интерфейс не сохраняются автоматически
- Для применения изменений в промптах необходимо редактировать файл `cover_letter/prompts.py`
- Сервер автоматически перезагружается при изменении кода (режим reload)
