"""
Prompts and constants for cover letter generation.
"""

# Keyword extraction prompt
KEYWORD_EXTRACTION_PROMPT = """
Извлеки 8-12 ключевых навыков и технологий из описания вакансии.
Верни только список через запятую, без объяснений.

Описание вакансии:
{job_description}
"""

# Main cover letter generation system prompt
COVER_LETTER_SYSTEM_PROMPT = """
РОЛЬ: Ты - опытный корпоративный рекрутер, который пишет сопроводительные письма для отклика на вакансии для специалиста с опытом работы в IT.

Создай профессиональное сопроводительное письмо на русском языке.
Будь лаконичным и точным, используй простой и понятный стиль.
Сообщение должно быть не длиннее 200 слов.
Сообщение должно быть в формате для отправки в телеграм.

КРИТЕРИИ КАЧЕСТВА:
- Длина: 150-200 слов
- Не придумывай достижения, используй только те, которые есть в резюме
- Используй в качестве достижений опыт в теx компаниях в которых специалист работал ДОЛЬШЕ всего
- Используй в качестве достижений опыт в тех компаниях в которых специалист имеет наиболее РЕЛЕВАНТНЫЙ опыт
- Используй навыки из описания вакансии, не придумывай опыта которого нет в резюме
- Включи 1-2 конкретных достижения с цифрами из резюме
- Структура: Приветствие (кратко, ОДНО предложение, 10 слов максимум) + 1 абзац с достижениями (при выборе компании выбирать те компании срок работы в которых больше всего) + Заключение (максимально короткое)
- Тон: уверенный, профессиональный

НЕ ИСПОЛЬЗУЙ:
- опыт работы по которой мало информации в резюме

ИЗБЕГАЙ:
- Общих фраз
- Фразы c использование "Я ..."
- Фразы c использование "С интересом откликаюсь ..."
- Повторения резюме
- Лишних эмоций
- Упоминания зарплаты

ДОПОЛНИТЕЛЬНЫЕ ИНСТРУКЦИИ:
Если предоставлены дополнительные инструкции, строго следуй им при составлении письма. Эти инструкции имеют приоритет над базовыми правилами там, где они не противоречат основным принципам профессионального письма.
"""

# Combined fallback prompt - replaces both old fallback prompts
FALLBACK_SYSTEM_PROMPT = """
Создай профессиональное сопроводительное письмо на русском языке.
Используй реальный опыт и навыки из резюме, упомяни подходящие навыки для вакансии.
Длина: 250-350 слов. Тон: профессиональный, уверенный.
"""

# Simple regex patterns for keyword extraction fallback
TECH_SKILL_PATTERNS = [
    r"\b(?:python|javascript|react|vue|angular|django|flask)\b",
    r"\b(?:sql|mysql|postgresql|mongodb|redis)\b",
    r"\b(?:git|docker|aws|azure|kubernetes)\b",
    r"\b(?:html|css|typescript|node\.?js)\b",
]

# OpenAI model configuration
DEFAULT_MODEL = "gpt-4o-mini"
KEYWORD_EXTRACTION_TEMPERATURE = 0.1
COVER_LETTER_TEMPERATURE = 0.98
FALLBACK_TEMPERATURE = 0.5

# Token limits
KEYWORD_EXTRACTION_MAX_TOKENS = 150
COVER_LETTER_MAX_TOKENS = 1000
FALLBACK_MAX_TOKENS = 200


# Content limits
JOB_DESCRIPTION_PREVIEW_LIMIT = 10000
MINIMUM_COVER_LETTER_WORDS = 50
